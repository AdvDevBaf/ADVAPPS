{% extends 'BafosApp/base.html' %}
{% block BafosApp_title %}ADV APPS{% endblock %}
{% block BafosApp_content %}

<form action="" method="POST" name="idform">
    <p class="texts">Имя кампании</p>
<p class="fields"><label>
    <input type="text" class="form-control" name="сompany" style="width: 480px;" id="input" onkeyup="copytext()">
</label>


    <p class="texts">Номер строки из плана</p>
<p class="fields"><label>
    <input type="text" class="form-control" name="сompany" style="width: 480px;" id="num" onkeyup="addzeros()">
</label>
    <p class="texts">Тип закупки</p>
    <label class="field">
        <select id="AUCorRF" name="data" class="form-control" onchange="copytype()">
            <option value="0">Выберете тип закупки</option>
            <option value="AUC">Аукцион</option>
            <option value="R-F">Охват и частота</option>
        </select>
    </label>
  <p class="hide AUC R-F texts">Цель кампании</p>
     <style type="text/css">
  .hide{
    display:none;
  }
  .hide.show{
    display: block;
  }
  </style>

 <script>
     window.addEventListener('DOMContentLoaded', function() {
         var select = document.querySelector('#AUCorRF'),
             hide = document.querySelectorAll('.hide');

  function change()
  {
    [].forEach.call(hide, function(el) {
           var add = el.classList.contains(select.value) ? "add" : "remove";
           el.classList[add]('show');
    });
  }
  select.addEventListener('change', change);
  change()
  });
  </script>

    <label class="hide 0 field">
          <p class=""></p>
         </label>

    <label class="hide AUC field">
        <select id="companytarget" name="data" class="form-control" onchange="copytarget()" style="width: 50%;">
            <option value="0">Выберете цель компании</option>
            <option value="BRAWA">Узнаваемость бренда</option>
            <option value="REACH">Охват</option>
            <option value="TRAFF">Трафик</option>
            <option value="ENGMN">Вовлеченность</option>
            <option value="APPIN">Установки приложения</option>
            <option value="VIDVI">Просмотры видео</option>
            <option value="LEADG">Генерация лидов</option>
            <option value="MESSA">Сообщения</option>
            <option value="CONVS">Конверсии</option>
            <option value="CATSA">Продажи товаров из каталога</option>
            <option value="STORE">Посещаемость точек</option>
        </select>
    </label>
     <label class="hide R-F field">
        <select id="anothertarget" name="data" class="form-control" onchange="copytarget()" style="width: 50%;">
            <option value="0">Выберете цель компании</option>
            <option value="BRAWA">Узнаваемость бренда</option>
            <option value="REACH">Охват</option>
            <option value="ENGMN">Вовлеченность для публикации</option>
            <option value="APPIN">Установки приложения</option>
            <option value="VIDVI">Просмотры видео</option>
            <option value="CONVS">Конверсии</option>
        </select>
    </label>

  <p class="texts">Тип аудитории</p>
        <label class="field">
        <select id="audience" name="data" class="form-control" onchange="copyaudience()">
            <option value="0">Выберете тип аудитории</option>
            <option value="CUS">Custom Audience</option>
            <option value="LAL">Lookalike Audience</option>
            <option value="DET">Detailed targeting</option>
        </select>
    </label>

 <p class="texts">Название аудитории</p>
<p class="fields"><label>
    <input type="text" name="сompany" class="form-control" style="width: 480px;" id="nameaudience" onkeyup="namesaudience()">
</label>


         <p class="texts">География(Если Россия, то другие варианты невозможны)</p>
    <label class="multiple">
        <select id="multipleregions" class="selectpicker" data-size="6" multiple data-live-search="true" onchange="copygeorgaphy()">
  <option value="RF">Россия</option>
  <option value="22">Алтайский край</option>
  <option value="28">Амурская область</option>
  <option value="29">Архангельская область</option>
  <option value="30">Астраханская область</option>
  <option value="31">Белгородская область</option>
  <option value="32">Брянская область</option>
  <option value="33">Владимирская область</option>
  <option value="34">Волгоградская область</option>
  <option value="35">Вологодская область</option>
  <option value="36">Воронежская область</option>
  <option value="77">г. Москва</option>
  <option value="79">Еврейская автономная область</option>
  <option value="75">Забайкальский край</option>
  <option value="37">Ивановская область</option>
  <option value="99">Иные территории, включая город и космодром Байконур</option>
  <option value="38">Иркутская область</option>
  <option value="07">Кабардино-Балкарская Республика</option>
  <option value="39">Калининградская область</option>
  <option value="40">Калужская область</option>
  <option value="41">Камчатский край</option>
  <option value="09">Карачаево-Черкесская Республика</option>
  <option value="42">Кемеровская область</option>
  <option value="43">Кировская область</option>
  <option value="44">Костромская область</option>
  <option value="23">Краснодарский край</option>
  <option value="24">Красноярский край</option>
  <option value="45">Курганская область</option>
  <option value="46">Курская область</option>
  <option value="47">Ленинградская область</option>
  <option value="48">Липецкая область</option>
  <option value="49">Магаданская область</option>
  <option value="50">Московская область</option>
  <option value="51">Мурманская область</option>
  <option value="83">Ненецкий автономный округ</option>
  <option value="52">Нижегородская область</option>
  <option value="53">Новгородская область</option>
  <option value="54">Новосибирская область</option>
  <option value="55">Омская область</option>
  <option value="56">Оренбургская область</option>
  <option value="57">Орловская область</option>
  <option value="58">Пензенская область</option>
  <option value="59">Пермский край</option>
  <option value="25">Приморский край</option>
  <option value="60">Псковская область</option>
  <option value="01">Республика Адыгея (Адыгея)</option>
  <option value="02">Республика Алтай</option>
  <option value="03">Республика Башкортостан</option>
  <option value="04">Республика Бурятия</option>
  <option value="05">Республика Дагестан</option>
  <option value="06">Республика Ингушетия</option>
  <option value="08">Республика Калмыкия</option>
  <option value="10">Республика Карелия</option>
  <option value="11">Республика Коми</option>
  <option value="91">Республика Крым</option>
  <option value="12">Республика Марий Эл</option>
  <option value="13">Республика Мордовия</option>
  <option value="14">Республика Саха (Якутия)</option>
  <option value="15">Республика Северная Осетия - Алания</option>
  <option value="16">Республика Татарстан (Татарстан)</option>
  <option value="17">Республика Тыва</option>
  <option value="19">Республика Хакасия</option>
  <option value="61">Ростовская область</option>
  <option value="62">Рязанская область</option>
  <option value="63">Самарская область</option>
  <option value="78">Санкт-Петербург</option>
  <option value="64">Саратовская область</option>
  <option value="65">Сахалинская область</option>
  <option value="66">Свердловская область</option>
  <option value="92">Севастополь</option>
  <option value="67">Смоленская область</option>
  <option value="26">Ставропольский край</option>
  <option value="68">Тамбовская область</option>
  <option value="69">Тверская область</option>
  <option value="70">Томская область</option>
  <option value="71">Тульская область</option>
  <option value="72">Тюменская область</option>
  <option value="18">Удмуртская Республика</option>
  <option value="73">Ульяновская область</option>
  <option value="27">Хабаровский край</option>
  <option value="86">Ханты-Мансийский автономный округ - Югра</option>
  <option value="74">Челябинская область</option>
  <option value="20">Чеченская Республика</option>
  <option value="21">Чувашская Республика - Чувашия</option>
  <option value="87">Чукотский автономный округ</option>
  <option value="89">Ямало-Ненецкий автономный округ</option>
  <option value="76">Ярославская область</option>
</select>
</label>
<script>
  $('.multipleregions').selectpicker();
</script>

      <p class="texts">Пол</p>
    <label class="field">
        <select id="sex" name="data" class="form-control" onchange="copysex()">
            <option value="0">Выберете пол</option>
            <option value="ALL">Любой</option>
            <option value="M">Мужской</option>
            <option value="W">Женский</option>
        </select>
    </label>

    <p class="texts">Возраст от</p>
<p class="fields"><label>
    <input type="text" id="age_above" class="form-control" style="width: 480px;" name="сompany" onchange=copyage()>
</label>
    <p class="texts">Возраст до</p>
<p class="fields"><label>
    <input type="text" id ="age_below" class="form-control" style="width: 480px;" name="сompany" onchange="copyage()">
</label>
 <p class="texts">Девайсы</p>
        <label class="field">
        <select id="device" name="data" class="form-control" onchange="copydevice()">
            <option value="0">Выберете девайсы</option>
            <option value="MOBI">MOBILE</option>
            <option value="DESK">DESKTOP</option>
            <option value="BOTH">BOTH</option>
        </select>
    </label>
     <p class="texts">Плейсменты(Если авто, то другие невозможны)</p>
    <label class="multiple">
<select id="multiplechoise" class="selectpicker" data-size="6" multiple data-live-search="true" onchange="placement()">
  <option value="AUTO">AUTO</option>
  <option value="FBFEED">Facebook News Feed</option>
  <option value="IGFEED">Instagram feed</option>
  <option value="FBMRPL">Facebook Marketplace</option>
  <option value="FBSUVI">Facebook suggested videos</option>
  <option value="FBRCOL">Facebook right column</option>
  <option value="MSINBX">Messenger inbox</option>
  <option value="FBSTOR">Facebook Stories</option>
  <option value="IGSTOR">Instagram Stories</option>
  <option value="MSSTOR">Messenger Stories</option>
  <option value="FBAPPV">Facebook in-stream videos</option>
  <option value="FBINSA">Facebook Instant Articles</option>
  <option value="ANNATI">Audience Network native, banner and interstitial</option>
  <option value="ANREVI">Audience Network rewarded videos</option>
  <option value="ANINST">Audience Network in-stream videos</option>
</select>
</label>

     <p class="texts">Оплата</p>
    <label class="field">
        <select id="price" name="data" class="form-control" onchange="prices()">
            <option value="0">Выберете ставку</option>
            <option value="CPM">CPM</option>
            <option value="CPC">CPC</option>
            <option value="CPL">CPL</option>
            <option value="CPVTP">CPVTP</option>
            <option value="CPV2S">CPV2S</option>
        </select>
    </label>

     <p class="texts">Формат</p>
    <label class="field">
        <select id="format" name="data" class="form-control" onchange="add_format()">
            <option value="0">Выберете формат</option>
            <option value="Carousel">Carousel</option>
            <option value="Single Image">Single image</option>
            <option value="Single Video">Single video</option>
        </select>
    </label>
 <p class="texts">Имя креатива по медиаплану</p>
<p class="fields"><label>
    <input type="text" name="сompany" class="form-control" id="creative" style="width: 480px;" onkeyup="add_creative()">
</label>
     <p class="texts">Длина видео(в секундах)</p>
<p class="fields"><label>
    <input type="text" name="сompany" class="form-control" id="length" style="width: 480px;" onkeyup="add_length()">
</label>

 <p class="texts">KPI</p>
 <div class="input-bar fields">
        <div class="input-bar-item">
          <form>
             <div class="width100">
                 <input type="text" class="form-control" name="сompany" style="width: 480px;" id="kpi" onkeyup="add_kpi()">
            </div>
          </form>
        </div>
        <div class="input-bar-item">
    <label style="padding-left: 20px;">
        <select id="pricetype" name="data" class="form-control" onchange="add_price_type()">
            <option value="">Выберете тип</option>
            <option value="CPM">CPM</option>
            <option value="CPC">CPC</option>
            <option value="CPL">CPL</option>
        </select>
    </label>        </div>
      </div>



<script>
  $('.multiplechoise').selectpicker();
</script>
<script>
    $('.input-daterange').datepicker({
    language: "ru"
});
</script>

<script>
                   function getSelectedText(elementId) {
    var elt = document.getElementById(elementId);

    if (elt.selectedIndex == -1)
        return null;

    return elt.options[elt.selectedIndex].text;
}

            function copytype() {
                var type = document.getElementById("AUCorRF").value;

                var val2 = document.getElementById('AUCorRF');
                var answer = document.getElementById("input").value + "|" + document.getElementById("num").value;
                if (val2.value == "0") {
                    document.getElementById("сompany_result").value = answer + "";
                } else if (!val2.value == "0") {
                    document.getElementById("сompany_result").value = answer + "|" + type;

                }
            }

            function copytarget() {
                var type = document.getElementById('AUCorRF').value;
                var target = document.getElementById('companytarget').value;
                var another_target = document.getElementById('anothertarget').value;

                var val2 = document.getElementById('AUCorRF');
                var answer = document.getElementById("input").value + "|" + document.getElementById("num").value;

                if (val2.value == "0") {
                    document.getElementById("сompany_result").value = answer + "";
                } else if (val2.value == "AUC" && target == "0") {
                    document.getElementById("сompany_result").value = answer + "|" + type;
                } else if (val2.value == "AUC" && !target == "0") {
                    document.getElementById("сompany_result").value = answer + "|" + type + "|" + target;
                } else if (val2.value == "R-F" && another_target == "0") {
                    document.getElementById("сompany_result").value = answer + "|" + type;
                } else {
                    document.getElementById("сompany_result").value = answer + "|" + type + "|" + another_target;
                }
            }


            function copyaudience() {
                var audience = document.getElementById('audience').value;

                if(!document.getElementById("result").value.includes("|")){
    document.getElementById("result").value = audience;
    }
    else{
    //elem_text.replace(document.getElementById("result").value.substring(0, str.indexOf("_")),document.getElementById("input").value);
    document.getElementById("result").value = audience+document.getElementById("result").value.substr(document.getElementById("result").value.indexOf('|')+length);
}
            }

            function namesaudience() {
            var price = document.getElementById('price').value;
            var values = $('#multiplechoise').val().join("_");
            var device = document.getElementById('device').value;
            var age_above = document.getElementById('age_above').value;
            var age_below = document.getElementById('age_below').value;
            var sex = document.getElementById('sex').value;
            var audience = document.getElementById('audience').value;
            var name_audience = document.getElementById('nameaudience').value;
             var geography = $('#multipleregions').val().join("+");
            if ($('#multipleregions').val().length > 5){
                geography = "REGS"
            }
            var answer = audience;
            if (name_audience == "") {
                document.getElementById("result").value = answer + "|" + geography + "|" + sex + "|" + age_above+ "-" + age_below + "|" + device + "|" + values + "|" + price;
            }
            else {
                document.getElementById("result").value = answer + "|" + name_audience + "|" + geography + "|" + sex + "|" + age_above+ "-" + age_below + "|" + device + "|" + values + "|" + price;
            }
        }

            function copygeorgaphy() {
            var price = document.getElementById('price').value;
            var values = $('#multiplechoise').val().join("_");
            var device = document.getElementById('device').value;
            var age_above = document.getElementById('age_above').value;
            var age_below = document.getElementById('age_below').value;
            var sex = document.getElementById('sex').value;
            var audience = document.getElementById('audience').value;
            var geography = $('#multipleregions').val().join("+");
            var name_audience = document.getElementById('nameaudience').value;
            var answer = audience  + "|" + name_audience + "|" + geography;
            if ($('#multipleregions').val() != "RF" && $('#multipleregions').val() != ""){
                var input = $('#multipleregions input[value="RF"]');
                var option = $('#multipleregions option[value="RF"]');
                input.prop('disabled', true);
                option.prop('disabled', true);
            } else if ($('#multipleregions').val() == "") {
             for (var i = 1; i < 100; i++) {
                 var j = i.toString();
                 if (i>=2 && i<10){
                     $('#multipleregions input[value=0'+j+']').prop('disabled', false);
                     $('#multipleregions option[value=0'+j+']').prop('disabled', false);
                 }else{
                 $('#multipleregions input[value='+j+']').prop('disabled', false);
                 $('#multipleregions option[value='+j+']').prop('disabled', false);
                 var input = $('#multipleregions input[value="RF"]');
                 $('#multipleregions input[value="RF"]').prop('disabled', false);
                 $('#multipleregions option[value="RF"]').prop('disabled', false);
                 input.parent('label').parent('a').parent('li').removeAttr('disabled');
                 }
                }
            } else if ($('#multipleregions').val() == "RF"){
                for (i = 1; i < 100; i++){
                    var j = i.toString();
                    if (i<10){
                    var input = $('#multipleregions input[value=0'+j+']');
                    var option = $('#multipleregions option[value=0'+j+']');
                    input.prop('disabled', true);
                   option.prop('disabled', true);
                    } else{
                    var input = $('#multipleregions input[value='+j+']');
                    var option = $('#multipleregions option[value='+j+']');
                    input.prop('disabled', true);
                   option.prop('disabled', true);
                   }
                }
            }
            if ($('#multipleregions').val().length > 5){
                answer = audience + "|" + name_audience + "|" + "REGS";
            document.getElementById("result").value = answer + "|" + sex + "|" + age_above+ "-" + age_below + "|" + device + "|" + values + "|" + price;
            } else {
            document.getElementById("result").value = answer + "|" + sex + "|" + age_above+ "-" + age_below + "|" + device + "|" + values + "|" + price;
            }
            }

            function copysex() {
            var price = document.getElementById('price').value;
            var values = $('#multiplechoise').val().join("_");
            var device = document.getElementById('device').value;
            var age_above = document.getElementById('age_above').value;
            var age_below = document.getElementById('age_below').value;
                var sex = document.getElementById('sex').value;
                var audience = document.getElementById('audience').value;
                var name_audience = document.getElementById('nameaudience').value;
            var geography = $('#multipleregions').val().join("+");
            if ($('#multipleregions').val().length > 5){
                geography = "REGS"
            }
                if (sex == "0") {
                    var answer = audience + "|" + name_audience + "|" + geography;
                    document.getElementById("result").value = answer + "|" + "" + "|";
                } else {
                    var answer = audience + "|" + name_audience + "|" + geography;
                    document.getElementById("result").value = answer + "|" + sex + "|" + age_above+ "-" + age_below + "|" + device + "|" + values + "|" + price;
                }
            }

            function copyage() {
            var price = document.getElementById('price').value;
            var values = $('#multiplechoise').val().join("_");
            var device = document.getElementById('device').value;
            var age_above = document.getElementById('age_above').value;
            var age_below = document.getElementById('age_below').value;
            var sex = document.getElementById('sex').value;
            var audience = document.getElementById('audience').value;
            var name_audience = document.getElementById('nameaudience').value;
             var geography = $('#multipleregions').val().join("+");
            if ($('#multipleregions').val().length > 5){
                geography = "REGS"
            }
            var answer = audience + "|" + name_audience + "|" + geography;
            if (Number(age_above)<14 && age_above!=''){
                alert("Минимальный возраст 14 лет");
               document.getElementById('age_above').value = 14;
               var age_above = document.getElementById('age_above').value;
                document.getElementById("result").value = answer + "|" + sex + "|" + age_above+ "-" + age_below + "|" + device + "|" + values + "|" + price;
            } else if((Number(age_below)>75) && age_below !=''){
                alert("Максимальный возраст 75 лет");
               document.getElementById('age_below').value = 75;
               var age_below = document.getElementById('age_above').value;
                document.getElementById("result").value = answer + "|" + sex + "|" + age_above+ "-" + age_below + "|" + device + "|" + values + "|" + price;
            } else {
             document.getElementById("result").value = answer + "|" + sex + "|" + age_above+ "-" + age_below + "|" + device + "|" + values + "|" + price;
             }
            }


            function copydevice() {
            var price = document.getElementById('price').value;
            var values = $('#multiplechoise').val().join("_");
            var device = document.getElementById('device').value;
            var age_above = document.getElementById('age_above').value;
            var age_below = document.getElementById('age_below').value;
            var sex = document.getElementById('sex').value;
            var audience = document.getElementById('audience').value;
            var name_audience = document.getElementById('nameaudience').value;
             var geography = $('#multipleregions').val().join("+");
            if ($('#multipleregions').val().length > 5){
                geography = "REGS"
            }
            var answer = audience + "|" + name_audience + "|" + geography;
            if (device=="0"){
                document.getElementById("result").value = answer + "|" + sex + "|" + age_above+ "-" + age_below + "|" + "" + values + "|" + "|" + price;
            } else {
                document.getElementById("result").value = answer + "|" + sex + "|" + age_above+ "-" + age_below + "|" + device + "|" + values + "|" + price;
            }
            if ($('#multiplechoise').val().includes("IGFEED") || $('#multiplechoise').val().includes("IGSTOR")){
                if(device=="DESK" || device=="BOTH"){
                 alert("Проверьте поле девайсов!")
                }
                   }
            }

        function placement() {
            var price = document.getElementById('price').value;
            var device = document.getElementById('device').value;
            var age_above = document.getElementById('age_above').value;
            var age_below = document.getElementById('age_below').value;
            var sex = document.getElementById('sex').value;
            var audience = document.getElementById('audience').value;
            var name_audience = document.getElementById('nameaudience').value;
             var geography = $('#multipleregions').val().join("+");
            if ($('#multipleregions').val().length > 5){
                geography = "REGS"
            }
            var answer = audience + "|" + name_audience + "|" + geography;
            var values = $('#multiplechoise').val().join("_");
            var arr = ['AUTO', 'FBFEED', 'IGFEED', 'FBMRPL', 'FBSUVI', 'FBRCOL', 'MSINBX', 'FBSTOR', 'IGSTOR', 'MSSTOR',
                'FBAPPV', 'FBINSA', 'ANNATI', 'ANREVI', 'ANINST'];
            if ($('#multiplechoise').val() != "AUTO" && $('#multiplechoise').val() != ""){
                var input = $('#multiplechoise input[value="AUTO"]');
                var option = $('#multiplechoise option[value="AUTO"]');
                input.prop('disabled', true);
                option.prop('disabled', true);
            } else if ($('#multiplechoise').val() == "") {
             for (i = 0; i < 15; i++) {
                 var j = arr[i];
                 add_length(arr[i]);
                 $('#multiplechoise input[value='+j+']').prop('disabled', false);
                 $('#multiplechoise option[value='+j+']').prop('disabled', false);
                 var input = $('#multiplechoise input[value="AUTO"]');
                 input.parent('label').parent('a').parent('li').removeAttr('disabled');
                }
            } else if ($('#multiplechoise').val() == "AUTO"){
                for (i = 1; i < 15; i++){
                    var j = arr[i].toString();
                    var input = $('#multiplechoise input[value='+j+']');
                    var option = $('#multiplechoise option[value='+j+']');
                    input.prop('disabled', true);
                   option.prop('disabled', true);
                }
            }
            if ($('#multiplechoise').val().includes("IGFEED") || $('#multiplechoise').val().includes("IGSTOR")){
                if(device=="DESK" || device=="BOTH"){
                 alert("Проверьте поле девайсов!")
                }
                   }
            document.getElementById("result").value = answer + "|" + sex + "|" + age_above+ "-" + age_below + "|" + device + "|" + values + "|" + price;

        }


        function prices() {
            var price = document.getElementById('price').value;
            var values = $('#multiplechoise').val().join("_");
            var device = document.getElementById('device').value;
            var age_above = document.getElementById('age_above').value;
            var age_below = document.getElementById('age_below').value;
            var sex = document.getElementById('sex').value;
            var name_audience = document.getElementById('nameaudience').value;
             var geography = $('#multipleregions').val().join("+");
            if ($('#multipleregions').val().length > 5){
                geography = "REGS";
            }
            var answer = document.getElementById('audience').value + "|" + name_audience + "|" + geography;
            if (price == "0") {
                document.getElementById("result").value = answer + "|" + sex + "|" + age_above+ "-" + age_below + "|" + device + "|" + values + "|" + "";
            }
            else {
                document.getElementById("result").value = answer + "|" + sex + "|" + age_above+ "-" + age_below + "|" + device + "|" + values + "|" + price;
            }
        }


        function add_format() {
         var format = document.getElementById('format').value;
         var length = document.getElementById('length').value + "s";
        var creative = document.getElementById('creative').value;
        var kpi = document.getElementById('kpi').value;
         if (format == 'Carousel' || format == 'Single Image'){
             length = 'x';
             document.getElementById('length').readOnly = true;
         }else {
             document.getElementById('length').readOnly = false;
         }
               if(!document.getElementById("ads_result").value.includes("|")){
    document.getElementById("ads_result").value = format;
    }
    else{
    //elem_text.replace(document.getElementById("result").value.substring(0, str.indexOf("_")),document.getElementById("input").value);
    document.getElementById("ads_result").value = format+"|"+creative+"|"+length +"|"+kpi;
}
        }

        function add_creative() {
        var format = document.getElementById('format').value;
        var creative = document.getElementById('creative').value;
        var length = document.getElementById('length').value +"s";
        var kpi = document.getElementById('kpi').value;
        if (format == 'Carousel' || format == 'Single Image'){
             length = 'x';
         }
        if (creative == ""){
            document.getElementById("ads_result").value = format+"|"+""+"|"+length +"|"+kpi;
        } else{
                       document.getElementById("ads_result").value = format+"|"+creative+"|"+length +"|"+kpi;
                   }
        }

        function add_length() {
        var format = document.getElementById('format').value;
        var creative = document.getElementById('creative').value;
        var length = document.getElementById('length').value;
        var kpi = document.getElementById('kpi').value;
        if (length == ""){
            document.getElementById("ads_result").value = format+"|"+creative+"|"+"" +"|"+kpi;
        } else{
                       document.getElementById("ads_result").value = format+"|"+creative+"|"+length +"s" +"|"+kpi;
                   }
        }

        function add_kpi() {
        var format = document.getElementById('format').value;
        var creative = document.getElementById('creative').value;
        var length = document.getElementById('length').value +"s";
        var kpi = document.getElementById('kpi').value;
        var price = document.getElementById('pricetype').value;

        if (format == 'Carousel' || format == 'Single Image'){
             length = 'x';
         }
        if (kpi == ""){
            document.getElementById("ads_result").value = format+"|"+creative+"|"+length +"|"+""+price;
        } else{
                       document.getElementById("ads_result").value = format+"|"+creative+"|"+length +"|"+kpi+price;
                   }
        }

                function add_price_type() {
            var price = document.getElementById('pricetype').value;
            var format = document.getElementById('format').value;
            var creative = document.getElementById('creative').value;
            var length = document.getElementById('length').value +"s";
            var kpi = document.getElementById('kpi').value;
             if (format == 'Carousel' || format == 'Single Image'){
             length = 'x';
         }
            if (price == "0") {
                document.getElementById("ads_result").value = format+"|"+creative+"|"+length +"|"+kpi;
            }
            else {
                document.getElementById("ads_result").value = format+"|"+creative+"|"+length +"|"+kpi+price;
            }
        }
</script>
<script>

        function copytext() {
var elem_text = document.getElementById("input").value;
if(!document.getElementById("сompany_result").value.includes("|")){
    document.getElementById("сompany_result").value = elem_text;
    }
    else{
    //elem_text.replace(document.getElementById("result").value.substring(0, str.indexOf("_")),document.getElementById("input").value);
    document.getElementById("сompany_result").value = document.getElementById("input").value+document.getElementById("сompany_result").value.substr(document.getElementById("сompany_result").value.indexOf('|')+length);
}
        }

function addzeros() {
    var num_text = Number(document.getElementById("num").value);
    if (num_text < 10) {
        var final_var = "00" + num_text.toString()
    } else if (num_text < 100) {
        var final_var = "0" + num_text.toString()
    } else {
        var final_var = num_text.toString()
    }
    var elem_text = document.getElementById("input").value;

    if (document.getElementById("num").value == ""){
    document.getElementById("сompany_result").value = elem_text + "|" +  "";
    } else if (!document.getElementById("num").value == ""){
    document.getElementById("сompany_result").value = elem_text + "|" +  final_var;

    var type = document.getElementById('AUCorRF').value;
    var target = document.getElementById('companytarget').value;
    var another_target = document.getElementById('anothertarget').value;
    var answer = elem_text + "|" +  final_var;

    if(!type=="0" && target=="0") {
     document.getElementById("сompany_result").value = answer + "|" + type;
    } else if(!type=="0" && !target=="0"){
     document.getElementById("сompany_result").value = answer + "|" + type + "|" + target;
    }
    else if(!type=="0" && !another_target=="0"){
     document.getElementById("сompany_result").value = answer + "|" + type + "|" + another_target;
    } else if (type=="0" && target=="0") {
             document.getElementById("сompany_result").value = answer;
    } else if (type=="0" && another_target=="0") {
             document.getElementById("сompany_result").value = answer;
    }
}

}
    </script>
     <p class="texts">Имя кампании:</p>
     <div class="input-bar fields">
        <div class="input-bar-item">
          <form>
             <div class="width100">
                <input class="form-control" style="width: 480px;" id="сompany_result">
            </div>
          </form>
        </div>
        <div class="input-bar-item">
          <input type="button" class="btn btn-info space" value="Скопировать в буфер" onclick="copy2clipboard_inc_result()"><a></a>
        </div>
      </div>


 <p class="texts">Имя группы объявлений:</p>
 <div class="input-bar fields">
        <div class="input-bar-item">
          <form>
             <div class="width100">
                <input class="form-control" style="width: 480px;" id="result">
            </div>
          </form>
        </div>
        <div class="input-bar-item">
          <input type="button" class="btn btn-info space" value="Скопировать в буфер" onclick="copy2clipboard_result()"><a></a>
        </div>
      </div>


     <p class="texts">Имя объявления:</p>
  <div class="input-bar fields">
        <div class="input-bar-item">
          <form>
             <div class="width100">
                <input class="form-control" style="width: 480px;" id="ads_result">
            </div>
          </form>
        </div>
        <div class="input-bar-item">
          <input type="button" class="btn btn-info space" value="Скопировать в буфер" onclick="copy2clipboard_ads_result()"><a></a>
        </div>
      </div>


     <p class="x"></p>

    <div>
        <p><input type="button" class="btn btn-info alt_but" value="Добавить в столбец" onclick="createTable()"><a></a></p>
</div>
    <div>
        <p><input type="button" class="btn btn-info alt_but" id="gp" value="Скопировать столбец" onclick="CopyTable()"><a></a></p>
</div>


<div class="table-responsive">
    <table border="1" class="table table-striped table-sm" id="table1">
          </table>
</div>


    <script>
        function copy2clipboard_inc_result() {
  /* Get the text field */
  var copyText = document.getElementById("сompany_result");

  /* Select the text field */
  copyText.select();

  /* Copy the text inside the text field */
  document.execCommand("copy");
}

      function copy2clipboard_result() {
  /* Get the text field */
  var copyText = document.getElementById("result");

  /* Select the text field */
  copyText.select();

  /* Copy the text inside the text field */
  document.execCommand("copy");
}

      function copy2clipboard_ads_result() {
  /* Get the text field */
  var copyText = document.getElementById("ads_result");

  /* Select the text field */
  copyText.select();

  /* Copy the text inside the text field */
  document.execCommand("copy");
}
        </script>
    <style>
           td{
      text-align: center;
   }
    </style>
<script>
    function createTable() {
            var table = document.getElementById('table1');
            var tr31 = document.createElement('tr'); //создаем еще строку
            var td31 = document.createElement('td');
            var td32 = document.createElement('td');
            var td33 = document.createElement('td');

            td31.innerHTML = document.getElementById("сompany_result").value; //создаем столбец
            td32.innerHTML = document.getElementById("result").value; //создаем столбец
            td33.innerHTML = document.getElementById("ads_result").value; //создаем столбец
            tr31.appendChild(td31); //кладем в новосозданную строку первый новосозданный столбец
                    tr31.appendChild(td32); //кладем в новосозданную строку первый новосозданный столбец
                    tr31.appendChild(td33); //кладем в новосозданную строку первый новосозданный столбец
            table.appendChild(tr31); //кладем в таблицу новосозданную строку (последней)
    }
    </script>
<script>
    function CopyTable() {
        var el = document.getElementById('table1');
   var body = document.body, range, sel;
    if (document.createRange && window.getSelection) {
        range = document.createRange();
        sel = window.getSelection();
        sel.removeAllRanges();
        try {
            range.selectNodeContents(el);
            sel.addRange(range);
        } catch (e) {
            range.selectNode(el);
            sel.addRange(range);
        }
    } else if (body.createTextRange) {
        range = body.createTextRange();
        range.moveToElementText(el);
        range.select();
    }
    document.execCommand("Copy");
    }
 </script>
</form>
<form action="{% url 'blog_index' %}">
        <p><button type="submit" class="btn btn-info alt_but">Назад на основную страницу</button>
    </form>

{% endblock %}
