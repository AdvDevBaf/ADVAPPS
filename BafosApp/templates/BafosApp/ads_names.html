{% extends 'BafosApp/base.html' %}
{% block BafosApp_title %}ADV APPS{% endblock %}
{% block BafosApp_content %}

<main role="main">
			<div class="jumbotron">
				<div class="container">
					<h1 class="display-3"></h1>
				</div>
			</div>
		</main>
<form action="" method="POST" name="idform">
    <p class="texts">Имя кампании</p>
<p class="fields"><label>
    <input type="text" name="сompany" id="input" onkeyup="copytext()">
</label>
    <p class="texts">Номер строки из плана</p>
<p class="fields"><label>
    <input type="text" name="сompany" id="" onkeyup="">
</label>
    <p class="texts">Тип закупки</p>
    <label class="field">
        <select id="AUCorRF" name="data" class="nav-link" onchange="">
            <option value="0">Выберете тип закупки</option>
            <option value="AUC">Аукцион</option>
            <option value="R-F">Охват и частота</option>
        </select>
    </label>
  <p class="texts">Тип закупки</p>
    <label class="field">
        <select id="companytarget" name="data" class="nav-link" onchange="">
            <option value="0">Выберете цель компании</option>
            <option value="BRAWA">Узнаваемость бренда</option>
            <option value="REACH">Охват</option>
            <option value="TRAFF">Трафик</option>
            <option value="ENGMN">Вовлеченность</option>
            <option value="APPIN">Установки приложения</option>
            <option value="VIDVI">Просмотры видео</option>
            <option value="LEADG">Генерация лидов</option>
            <option value="MESSA">Сообщения</option>
            <option value="CONVS">Конверсии</option>
            <option value="CATSA">Продажи товаров из каталога</option>
            <option value="STORE">Посещаемость точек</option>
        </select>
    </label>
     <label class="field">
        <select id="anothertarget" name="data" class="nav-link" onchange="">
            <option value="0">Выберете цель компании</option>
            <option value="BRAWA">Узнаваемость бренда</option>
            <option value="REACH">Охват</option>
            <option value="ENGMN">Вовлеченность для публикации</option>
            <option value="APPIN">Установки приложения</option>
            <option value="VIDVI">Просмотры видео</option>
            <option value="CONVS">Конверсии</option>
        </select>
    </label>
  <p class="texts">Тип аудитории</p>
        <label class="field">
        <select id="letter" name="data" class="nav-link" onchange="copyletter()">
            <option value="0">Выберете тип аудитории</option>
            <option value="123">123</option>
            <option value="777">777</option>
        </select>
    </label>
  <p class="texts">География</p>
    <label class="field">
        <select id="number" name="data" class="nav-link" onchange="copynumber()">
            <option value="0">Выберете регион</option>
            <option value="RF">Россия</option>
            <option value="Moscow">Москва</option>
            <option value="Ktulhu">Рльех</option>
        </select>
</label>
      <p class="texts">Пол</p>
    <label class="field">
        <select id="sex" name="data" class="nav-link" onchange="">
            <option value="0">Выберете пол</option>
            <option value="ALL">Любой</option>
            <option value="M">Мужской</option>
            <option value="W">Женский</option>
        </select>
    </label>
    <p class="texts">Возраст от</p>
<p class="fields"><label>
    <input type="text" name="сompany" onkeyup="">
</label>
    <p class="texts">Возраст до</p>
<p class="fields"><label>
    <input type="text" name="сompany" onkeyup="">
</label>
 <p class="texts">Девайсы</p>
        <label class="field">
        <select id="device" name="data" class="nav-link" onchange="">
            <option value="0">Выберете девайсы</option>
            <option value="MOBI">MOBILE</option>
            <option value="DESK">DESKTOP</option>
            <option value="BOTH">BOTH</option>
        </select>
    </label>
     <p class="texts">Плейсменты</p>
    <label class="multiple">
<select id="multiplechoise" class="selectpicker" multiple data-live-search="true" onchange="smth()">
  <option>Mustard</option>
  <option>Ketchup</option>
  <option>Barbecue</option>
</select>
</label>
     <p class="texts">Ставка</p>
    <label class="field">
        <select id="rate" name="data" class="nav-link" onchange="">
            <option value="0">Выберете ставку</option>
            <option value="MAN">Ручная</option>
            <option value="AUT">Автоматическая</option>
        </select>
    </label>
     <p class="texts">Оплата</p>
    <label class="field">
        <select id="price" name="data" class="nav-link" onchange="">
            <option value="0">Выберете ставку</option>
            <option value="CPM">CPM</option>
            <option value="CPC">CPC</option>
            <option value="CPL">CPL</option>
            <option value="CPVTP">CPVTP</option>
            <option value="CPV2S">CPV2S</option>
        </select>
    </label>
 <p class="texts">Freq cap</p>
<p class="fields"><label>
    <input type="text" name="сompany" onkeyup="">
</label>
     <p class="texts">Формат</p>
    <label class="field">
        <select id="format" name="data" class="nav-link" onchange="">
            <option value="0">Выберете формат</option>
            <option value="Carousel">Carousel</option>
            <option value="SingleImage">Single image</option>
            <option value="SingleVideo">Single video</option>
        </select>
    </label>
 <p class="texts">Имя креатива по медиаплану</p>
<p class="fields"><label>
    <input type="text" name="сompany" onkeyup="">
</label>
     <p class="texts">Длина видео(в секундах)</p>
<p class="fields"><label>
    <input type="text" name="сompany" onkeyup="">
</label>
        <p class="texts">KPI</p>
<p class="fields"><label>
    <input type="text" name="сompany" onkeyup="">
</label>

<script>
  $('select').selectpicker();
</script>

<script>
                   function getSelectedText(elementId) {
    var elt = document.getElementById(elementId);

    if (elt.selectedIndex == -1)
        return null;

    return elt.options[elt.selectedIndex].text;
}

            function copyletter() {
                var text1 = getSelectedText('letter');
                var text2 = getSelectedText('number');
                var val2 = document.getElementById('number');
                var values = $('#multiplechoise').val().join("_");

                if (val2.value =="0" && !($('#multiplechoise option').is(':selected'))) {
                    var answer = document.getElementById("input").value;
                    document.getElementById("result").value = answer + "_" + text1 + "";
                } else if (!val2.value =="0" && !($('#multiplechoise option').is(':selected'))) {
                   var answer = document.getElementById("input").value + "_" + text1;

                    document.getElementById("result").value = answer + "_" + text2;
                } else if (val2.value =="0" && ($('#multiplechoise option').is(':selected'))) {
                    var answer = document.getElementById("input").value;

                    document.getElementById("result").value = answer + "_" + text1 + "_"+ values;
                } else {
                    var answer = document.getElementById("input").value + "_" + text1;

                    document.getElementById("result").value = answer + "_" + text2 + "_" + values;
                }

            }

            function copynumber() {
                var text1 = getSelectedText('letter');
                var text2 = getSelectedText('number');
                var val = document.getElementById('letter');
                var values = $('#multiplechoise').val().join("_");
                if (val.value =="0" && !($('#multiplechoise option').is(':selected'))) {
                    var answer = document.getElementById("input").value + "_" + "";

                    document.getElementById("result").value = answer + "_" + text2;
                } else if (!val.value =="0" && !($('#multiplechoise option').is(':selected'))) {
                   var answer = document.getElementById("input").value + "_" + text1;

                    document.getElementById("result").value = answer + "_" + text2;
                } else if (val.value =="0" && ($('#multiplechoise option').is(':selected'))) {
                    var answer = document.getElementById("input").value + "_" + "";

                    document.getElementById("result").value = answer + "_" + text2 + "_" + values;
                } else {
                    var answer = document.getElementById("input").value + "_" + text1;

                    document.getElementById("result").value = answer + "_" + text2 + "_" + values;
                }


            }


        function smth() {
            var values = $('#multiplechoise').val().join("_");
            var text1 = getSelectedText('letter');
            var text2 = getSelectedText('number');
            var val1 = document.getElementById('letter');
            var val2 = document.getElementById('number');
            if (val1.value =="0" && val2.value =="0") {
                var answer = document.getElementById("input").value + "_" + "";

                document.getElementById("result").value = answer + "_" + values;
            } else if (val1.value =="0" && !val2.value =="0") {
                var answer = document.getElementById("input").value + "_" + text2;

                document.getElementById("result").value = answer + "_" + values;
            } else if (val2.value =="0" && !val1.value =="0"){
                var answer = document.getElementById("input").value + "_" + text1;

                document.getElementById("result").value = answer + "_" + values;
            } else {
                var answer = document.getElementById("input").value + "_" + text1 + "_" + text2;

                document.getElementById("result").value = answer + "_" + values;
            }

        }
</script>
<script>

        function copytext() {
var elem_text = document.getElementById("input").value;
if(!document.getElementById("result").value.includes("_")){
    document.getElementById("result").value = elem_text;
    }
    else{
    //elem_text.replace(document.getElementById("result").value.substring(0, str.indexOf("_")),document.getElementById("input").value);
    document.getElementById("result").value = document.getElementById("input").value+document.getElementById("result").value.substr(document.getElementById("result").value.indexOf('_')+length);
}
        }

    </script>
     <p class="texts">Имя кампании:</p>
<p class="fields"><label>
    <input type="text" name="сompany" id="result" >
</label>

 <p class="texts">Имя группы объявлений:</p>
<p class="fields"><label>
    <input type="text" name="сompany" id="group_result" >
</label>
     <p class="texts">Имя объявления:</p>
<p class="fields"><label>
    <input type="text" name="сompany" id="ads_result" >
</label>
<p class="texts" id="x"></p>


    
<div>
            <p><input type="button" class="knopka btn-sm" value="Скопировать в буфер" onclick="copy2clipboard()"><a></a></p>
</div>
    <div>
        <p><input type="button" class="knopka btn-sm" value="Добавить в столбец" onclick="createTable()"><a></a></p>
</div>
    <div>
        <p><input type="button" class="knopka btn-sm" id="gp" value="Скопировать столбец" onclick="CopyTable()"><a></a></p>
</div>


<div class="table-responsive">
    <table border="1" class="table table-striped table-sm" id="table1">
          </table>
</div>



    <script>
        function copy2clipboard() {
  /* Get the text field */
  var copyText = document.getElementById("result");

  /* Select the text field */
  copyText.select();

  /* Copy the text inside the text field */
  document.execCommand("copy");
}
        </script>
<script>
    function createTable() {
            var table = document.getElementById('table1');
            var tr31 = document.createElement('tr'); //создаем еще строку
            var td31 = document.createElement('td');
            td31.innerHTML = document.getElementById("result").value; //создаем столбец
            tr31.appendChild(td31); //кладем в новосозданную строку первый новосозданный столбец
            table.appendChild(tr31); //кладем в таблицу новосозданную строку (последней)
    }
    </script>
<script>
    function CopyTable() {
        var el = document.getElementById('table1');
   var body = document.body, range, sel;
    if (document.createRange && window.getSelection) {
        range = document.createRange();
        sel = window.getSelection();
        sel.removeAllRanges();
        try {
            range.selectNodeContents(el);
            sel.addRange(range);
        } catch (e) {
            range.selectNode(el);
            sel.addRange(range);
        }
    } else if (body.createTextRange) {
        range = body.createTextRange();
        range.moveToElementText(el);
        range.select();
    }
    document.execCommand("Copy");
    }
 </script>
</form>
<p><button class="knopka btn-sm" name="mybtn"><a href="{% url 'blog_index' %}">Назад на основную страницу</a></button>

{% endblock %}
